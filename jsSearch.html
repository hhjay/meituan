<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>js search(目前可以支持汉字 正在查找拼音)</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<style>
	*{ margin:0;padding:0; }
	.main{ width: 420px;height: auto;margin: 50px auto; }
	.shade{ background-color: #000;opacity: 0.5;position: absolute;z-index: 10000; }
	</style>
</head>
<body>
	<div class="main">
		<input type="text" id="searchName" />
		<div class="a">
			<table class="table table-bordered table-striped-w" id="riderListTable">
		        <thead>
		        <tr>
		            <th>骑手</th>
		            <th>送/总</th>
		            <th>距离</th>
		            <th>站点</th>
		        </tr>
		        </thead>
				<tbody id="riderListBody">
						<tr>
							<td><span class="riderName">葛泽浩</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）萨达 dasd 啊</td>
						</tr><tr>
							<td><span class="riderName">周易</span><span style="color:red;">[掉线]</span></td>
							<td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">袁钰涵</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">徐杜鹃</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">徐杜娟</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span data-toggle="tooltip" title="" data-placement="top" data-original-title="入职未满7天"><span class="riderName">于磊</span><span style="color:#4ac598">［新手］</span></span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr>

						<tr>
							<td><span class="riderName">周易</span><span style="color:red;">[掉线]</span></td>
							<td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">葛泽浩</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">袁钰涵</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">徐杜鹃</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">徐杜娟</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span data-toggle="tooltip" title="" data-placement="top" data-original-title="入职未满7天"><span class="riderName">于磊</span><span style="color:#4ac598">［新手］</span></span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr>

						<tr>
							<td><span class="riderName">周易</span><span style="color:red;">[掉线]</span></td>
							<td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">葛泽浩</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">袁钰涵</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">徐杜鹃</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">徐杜娟</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span data-toggle="tooltip" title="" data-placement="top" data-original-title="入职未满7天"><span class="riderName">于磊</span><span style="color:#4ac598">［新手］</span></span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr>

						<tr>
							<td><span class="riderName">周易</span><span style="color:red;">[掉线]</span></td>
							<td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">葛泽浩</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">袁钰涵</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">徐杜鹃</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">徐杜娟</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span data-toggle="tooltip" title="" data-placement="top" data-original-title="入职未满7天"><span class="riderName">于磊</span><span style="color:#4ac598">［新手］</span></span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr>

						<tr>
							<td><span class="riderName">周易</span><span style="color:red;">[掉线]</span></td>
							<td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">葛泽浩</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">袁钰涵</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">徐杜鹃</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span class="riderName">徐杜娟</span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr><tr>
							<td><span data-toggle="tooltip" title="" data-placement="top" data-original-title="入职未满7天"><span class="riderName">于磊</span><span style="color:#4ac598">［新手］</span></span><span style="color:red;">[掉线]</span></td><td> <strong>0</strong>/0</td><td>-</td><td>徐杜娟的站点2（勿改！）</td>
						</tr>
				</tbody>
			</table>
		</div>
		
	</div>
	
	<script>
	var name = "";
	var obj = "";

	var fnSerachName = function(){
		var tableY = $("#riderListBody").offset().top,
			tableX = $("#riderListBody").offset().left,
			tableW = $("#riderListBody").width(),//找到第一个的x，y之后累加找到当前的xy
			span   = $(".riderName"),
			trH    = $("#riderListBody tr").height();

		var successNum = []; // 成功的个数
		$(".shade").hide();
		for (var i = 0; i < span.length; i++) {
			span[i].style.color = "#000";
			var _this   = span[i],
				nameStr = _this.innerHTML.toLowerCase();
			if ( nameStr.search(name) > -1 ) {//即匹配成功
				successNum.push(i);
			}
		};

		if ( successNum.length === 0 ) {
			alert("没有搜索到相应的骑手名！");
			return;
		}else{
			successNum.push( span.length-1 );
		}

		var html = "";

		var firstShade = ".riderName:eq(" + successNum[0] + ")";
		firstH = $(firstShade).offset().top - tableY;// 开始的位置
		html += "<div class='shade'" + " " +
				 "style='width:" + tableW + "px;" +
				 "height:" + firstH + "px;" +
				 "top:" + tableY + "px;" +
				 "left:" + tableX + "px;" +
				 "'></div>"
		for (var j = 0; j < successNum.length-1; j++) {
			var shadeW = 0,//当前遮罩层的宽度
				shadeH = 0,
				shadeX = 0,
				shadeY = 0;

			var eqLoc  = ".riderName:eq(" + successNum[j] + ")",
				eqNext = ".riderName:eq(" + successNum[j+1] + ")";

			if ( j+1 === successNum.length-1 ) {//最后一个
				shadeH = $(eqNext).offset().top - $(eqLoc).offset().top;
				shadeY = $(eqLoc).offset().top + $(eqLoc).height();
			}else{
				shadeH = $(eqNext).offset().top - $(eqLoc).offset().top - $(eqLoc).height();
				shadeY = $(eqLoc).offset().top + $(eqLoc).height();
			}
				
			shadeW = tableW;
			shadeX = tableX;

			span[ successNum[j] ].style.color = "yellow";
			html += "<div class='shade'" + " " +
					 "style='width:" + shadeW + "px;" +
					 "height:" + shadeH + "px;" +
					 "top:" + shadeY + "px;" +
					 "left:" + shadeX + "px;" +
					 "'></div>";
		};

		$('.a').append( html );
	}


	$("#searchName").keyup(function(event) {
		var _this = $(this);
		name = _this.val();
	});
	$("#searchName").change(function(event) {
		name = name.toLowerCase();//全部改成小写 以模糊匹配
		fnSerachName();
	});
	</script>
</body>
</html>